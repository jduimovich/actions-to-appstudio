# 💁 This demo will use cached OIDC to access app studio

name: List-App-Studio-Apps 
env: 
  KUBE_CONFIG: ${{ secrets.KUBE_CONFIG }}
  OIDC: ${{ secrets.OIDC }}
  OIDC_NAME: ${{ secrets.OIDC_NAME }}
on: 
  push: 
    branches: [ "main" ] 
jobs:
  list-apps:
    name: List App Studio Apps
    runs-on: ubuntu-18.04  
    steps:
    - name: Init for kubectl access 
      uses: actions/github-script@v6
      with:
        script: |

          echo "${{ env.KUBE_CONFIG }}" | base64 --decode > ~/.kube/config
          echo "${{ env.OIDC }}" | base64 --decode > ~/.kube/cache/oidc-login/${{ env.OIDC_NAME }}
           , refer to https://github.com/redhat-actions/oc-login#getting-started-with-the-action-or-see-example");
          kubectl get cm 
          kubectl get application
